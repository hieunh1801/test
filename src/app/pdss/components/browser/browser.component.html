<div class="browser" fxLayout="column" fxLayoutGap="20px">
  <form class="search-form" [formGroup]="searchForm">
    <div>
      <h2>Drug/Gene Browser</h2>
      <p>Some results below may be the things you are looking for</p>
    </div>
    <mat-form-field class="full-width" appearance="outline">
      <mat-label
        >찾으시려는 Keyword 입력하세요 (예: CYP2C9 / Warfarin /
        Tyrenol)</mat-label
      >
      <input
        type="text"
        formControlName="keyword"
        name="keyword"
        matInput
        (keydown.enter)="search()"
      />
      <button
        type="button"
        mat-button
        matSuffix
        mat-icon-button
        aria-label="Autofill"
        (click)="search()"
      >
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
  </form>

  <div
    fxLayout="row"
    fxLayoutGap="20px"
    fxLayout.xs="column"
    [fxHide]="isSearch"
  >
    <div fxFlex="50">
      <h3>Drugs</h3>
      <mat-selection-list #drugs [multiple]="false">
        <mat-list-option *ngFor="let drug of listOfDrugs" [value]="drug.name">
          <a [routerLink]="['/pdss/drug', drug.id, 'detail']">{{
            drug.name
          }}</a>
        </mat-list-option>
      </mat-selection-list>
    </div>
    <div fxFlex="50">
      <h3>Genes</h3>
      <mat-selection-list #genes [multiple]="false">
        <mat-list-option *ngFor="let gene of listOfGenes" [value]="gene">
          <a [routerLink]="['/pdss/gene', gene.id, 'detail']">{{
            gene.name
          }}</a>
        </mat-list-option>
      </mat-selection-list>
    </div>
  </div>

  <div
    fxLayout="row"
    fxLayoutGap="20px"
    fxLayout.xs="column"
    [fxHide]="!isSearch"
  >
    <div fxFlex="100">
      <h2>Results ({{ searchTotal }})</h2>
      <mat-paginator
        showFirstLastButtons="true"
        [length]="searchTotal"
        [pageSize]="pageSize"
        (page)="change($event)"
      ></mat-paginator>
      <table mat-table [dataSource]="dataSource">
        <ng-container matColumnDef="name">
          <mat-header-cell mat-header-cell *matHeaderCellDef
            >Name</mat-header-cell
          >
          <mat-cell *matCellDef="let result">
            <a
              *ngIf="result.type != 'gene'"
              [routerLink]="['/pdss/drug', result.id, 'detail']"
              ><p
                [innerHTML]="result.name | highlightSearch: searchKeyword"
              ></p>
            </a>
            <a
              *ngIf="result.type === 'gene'"
              [routerLink]="['/pdss/gene', result.id, 'detail']"
              ><p
                [innerHTML]="result.name | highlightSearch: searchKeyword"
              ></p>
            </a>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="type">
          <mat-header-cell mat-header-cell *matHeaderCellDef
            >Type</mat-header-cell
          >
          <mat-cell *matCellDef="let result">
            <span *ngIf="result.type == 'Brand'">
              <!--<button mat-flat-button color="accent">brand</button>-->
              <span class="brand">brand</span>
            </span>
            <span *ngIf="result.type == 'Generic_Name'">
              <!--<button mat-flat-button color="success">drug</button>-->
              <span class="drug">drug</span>
            </span>
            <span *ngIf="result.type == 'gene'">
              <!--<button mat-flat-button color="primary">gene</button>-->
              <span class="gene">gene</span>
            </span>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row
          matRipple
          *matRowDef="let row; columns: displayedColumns"
        ></mat-row>
      </table>
    </div>
  </div>
</div>
