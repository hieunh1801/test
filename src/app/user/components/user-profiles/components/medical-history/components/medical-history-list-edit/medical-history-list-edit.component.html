<div id="medical-history-list">
  <!-- empty list -->
  <ng-container *ngIf="!medicalHistoryList || medicalHistoryList.length === 0">
    <div
      fxLayout="column"
      fxLayoutAlign="center center"
      id="medical-history-empty"
    >
      <img
        src="/assets/images/empty.svg"
        alt="image"
        width="40px"
        height="40px"
      />
      <h3 translate>
        USER__USER_PROFILES__MEDICAL_HISTORY__MEDICAL_HISTORY_LIST_EDIT__STRINGS__EMPTY
      </h3>
    </div>
  </ng-container>

  <!-- edit list -->
  <ng-container *ngIf="medicalHistoryList && medicalHistoryList.length > 0">
    <div *ngFor="let medicalHistory of medicalHistoryList">
      <div
        class="medical-history-list-item"
        fxLayout="row"
        fxLayoutAlign="space-between center"
        fxLayout.lt-sm="column"
        fxLayoutAlign.lt-sm="none"
        [ngClass]="{ 'edit-item': isEditItem(medicalHistory) }"
      >
        <span fxFlex="20" class="drug-name">{{ medicalHistory?.drug }}</span>
        <span fxFlex class="note">{{ medicalHistory?.note }}</span>

        <span fxFlex="20" class="time-range">
          <mat-icon>schedule</mat-icon>
          {{ medicalHistory?.fromDate }}
          <span *ngIf="medicalHistory?.toDate" translate>
            USER__USER_PROFILES__MEDICAL_HISTORY__MEDICAL_HISTORY_LIST__STRINGS__TO
          </span>
          <span *ngIf="medicalHistory?.toDate">
            {{ medicalHistory?.toDate }}
          </span>
          <span
            *ngIf="!medicalHistory?.fromDate && !medicalHistory?.toDate"
            translate
          >
            USER__USER_PROFILES__MEDICAL_HISTORY__MEDICAL_HISTORY_LIST__STRINGS__NO_INFORMATION
          </span>
        </span>
        <button mat-icon-button (click)="toggleEdit(medicalHistory.id)">
          <mat-icon class="edit-button">edit</mat-icon>
        </button>
        <button mat-icon-button (click)="deleteItem(medicalHistory.id)">
          <mat-icon class="delete-button">delete</mat-icon>
        </button>
      </div>
      <div
        class="medical-history-list-item-edit"
        *ngIf="isEditItem(medicalHistory)"
      >
        <app-medical-history-add
          [medicalHistory]="medicalHistory"
          (cancelEvent)="toggleEdit(medicalHistory.id)"
          (saveEvent)="updateItem($event)"
        ></app-medical-history-add>
      </div>
    </div>
  </ng-container>
  <div class="actions" fxLayout="row" fxLayoutAlign="end center">
    <button mat-stroked-button (click)="cancelClick()">
      <span translate>
        USER__USER_PROFILES__MEDICAL_HISTORY__MEDICAL_HISTORY_LIST_EDIT__BUTTONS__CANCEL
      </span>
    </button>
  </div>
</div>
